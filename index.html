<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/favicon.png">

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Baron Greenback ($GBARON)</title>
  <meta name="theme-color" content="#070b10" />

  <script>
    (function () {
      var MOBILE_MAX = 900;

      function qs(name){
        return new URLSearchParams(location.search).get(name);
      }

      function isMobile(){
        var w = Math.min(window.innerWidth || 9999, screen.width || 9999);
        return (w <= MOBILE_MAX) || /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      }

      function pick(){
        if (qs("desktop") === "1") return "desktop_v3.html";
        if (qs("mobile") === "1")  return "mobile.html";
        return isMobile() ? "mobile.html" : "desktop.html";
      }

      (async function(){
        var page = pick();

        // keep URL clean (no /mobile.html or /desktop.html)
        try { history.replaceState(null, "", "/"); } catch(e){}

        // preserve ?v= cachebuster if you use it
        var v = qs("v");
        var url = page + (v ? ("?v=" + encodeURIComponent(v)) : "");

        try{
          var res = await fetch(url, { cache: "no-store" });
          if(!res.ok) throw new Error("HTTP " + res.status);
          var html = await res.text();

          // Replace the whole document with the fetched HTML
          document.open();
          document.write(html);
          document.close();
        }catch(err){
          // If fetch fails, fall back to a hard redirect (still no UI flash)
          location.replace(page);
        }
      })();
    })();
  </script>
</head>
<body></body>
</html>
