<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Greenback ($GBACK)</title>
  <style>
    :root{
      --bg:#070b10;
      --panel:#0d1320;
      --panel2:#0b111c;
      --text:#eaf2ff;
      --muted:#93a4c7;
      --line:rgba(255,255,255,.10);
      --good:#33d17a;
      --warn:#ffb000;
      --bad:#ff4d6d;
      --accent:#6ee7ff;
      --accent2:#a78bfa;
      --shadow: 0 14px 40px rgba(0,0,0,.55);
      --r:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(110,231,255,.18), transparent 55%),
        radial-gradient(900px 500px at 85% 10%, rgba(167,139,250,.18), transparent 60%),
        radial-gradient(700px 500px at 50% 110%, rgba(51,209,122,.12), transparent 60%),
        var(--bg);
      color:var(--text);
      overflow:hidden; /* prevents mobile scroll */
    }

    /* Full-screen frame that ALWAYS fits mobile */
    .stage{
      height:100dvh; /* dynamic viewport height (mobile safe) */
      min-height:100svh;
      width:100%;
      display:flex;
      align-items:stretch;
      justify-content:center;
      padding:
        calc(12px + env(safe-area-inset-top))
        12px
        calc(12px + env(safe-area-inset-bottom))
        12px;
    }

    .frame{
      width:min(980px, 100%);
      height:100%;
      display:flex;
      flex-direction:column;
      gap:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:24px;
      box-shadow: var(--shadow);
      padding:14px;
      overflow:hidden; /* keep everything inside */
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 12px;
      background:rgba(0,0,0,.25);
      border:1px solid var(--line);
      border-radius:18px;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }

    .brand .title{
      font-weight:800;
      letter-spacing:.3px;
      font-size:clamp(16px, 2.2vw, 22px);
      line-height:1.1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand .sub{
      font-size:clamp(11px, 1.6vw, 13px);
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .stats{
      display:flex;
      align-items:stretch;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:2px;
      padding:8px 10px;
      border-radius:14px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--line);
      min-width:120px;
    }
    .pill .k{font-size:11px;color:var(--muted)}
    .pill .v{
      font-size:clamp(14px, 2vw, 18px);
      font-weight:800;
      line-height:1.1;
      display:flex;
      align-items:baseline;
      gap:6px;
      white-space:nowrap;
    }
    .pill .v small{font-size:11px;color:var(--muted);font-weight:700}

    .content{
      flex:1;
      min-height:0;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:12px;
      overflow:hidden;
    }

    @media (max-width: 820px){
      .content{grid-template-columns:1fr; gap:12px;}
      .pill{min-width:140px}
    }

    .card{
      background:rgba(0,0,0,.22);
      border:1px solid var(--line);
      border-radius:var(--r);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:0;
    }

    .card h2{
      margin:0;
      padding:10px 12px;
      font-size:13px;
      letter-spacing:.25px;
      color:var(--muted);
      border-bottom:1px solid var(--line);
      background:rgba(255,255,255,.03);
      text-transform:uppercase;
    }

    /* Fake chart area */
    .chartWrap{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:0;
    }

    .chartTop{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .price{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }
    .price .big{
      font-weight:900;
      font-size:clamp(20px, 3.2vw, 30px);
      line-height:1;
      display:flex;
      align-items:baseline;
      gap:8px;
      white-space:nowrap;
    }
    .price .big .pct{
      font-size:12px;
      font-weight:800;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(51,209,122,.10);
      color:var(--good);
    }
    .price .small{
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .sparkBox{
      flex:1;
      min-width:220px;
      max-width:460px;
      height:110px;
      border-radius:14px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(110,231,255,.10), rgba(0,0,0,0));
      overflow:hidden;
      position:relative;
    }
    .sparkBox svg{width:100%; height:100%}
    .sparkGlow{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:radial-gradient(280px 140px at 85% 35%, rgba(110,231,255,.25), transparent 60%);
      opacity:.6;
      mix-blend-mode:screen;
    }

    .actions{
      margin-top:auto;
      padding:12px;
      border-top:1px solid var(--line);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:stretch;
      justify-content:space-between;
      background:rgba(255,255,255,.02);
    }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      flex:1;
      min-width:0;
    }

    button{
      appearance:none;
      border:none;
      border-radius:14px;
      padding:12px 14px;
      font-weight:900;
      letter-spacing:.3px;
      cursor:pointer;
      color:var(--text);
      background:rgba(255,255,255,.06);
      border:1px solid var(--line);
      transition: transform .06s ease, filter .2s ease, background .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      flex:1;
      min-width:160px;
    }
    button:active{transform:translateY(1px) scale(.99)}
    button:focus-visible{outline:2px solid rgba(110,231,255,.65); outline-offset:2px}

    .primary{
      background:linear-gradient(135deg, rgba(110,231,255,.22), rgba(167,139,250,.18));
      border-color:rgba(110,231,255,.25);
    }
    .danger{
      background:linear-gradient(135deg, rgba(255,77,109,.22), rgba(255,176,0,.10));
      border-color:rgba(255,77,109,.28);
    }
    .ghost{
      background:rgba(255,255,255,.04);
    }

    .rightCol{
      min-height:0;
    }

    .panel{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:0;
    }

    .log{
      flex:1;
      min-height:0;
      overflow:auto;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      padding:10px;
    }
    .log p{
      margin:0 0 8px 0;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }
    .log p b{color:var(--text)}
    .log::-webkit-scrollbar{width:10px}
    .log::-webkit-scrollbar-thumb{background:rgba(255,255,255,.10); border-radius:999px}
    .hint{
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    .toast{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:calc(16px + env(safe-area-inset-bottom));
      background:rgba(0,0,0,.78);
      border:1px solid var(--line);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      font-size:12px;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      box-shadow: var(--shadow);
      max-width:min(520px, calc(100% - 24px));
      text-align:center;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-4px);
    }

    .shake{
      animation: shake .32s linear 1;
    }
    @keyframes shake{
      0%{transform:translate(0,0)}
      20%{transform:translate(-6px, 2px)}
      40%{transform:translate(6px, -2px)}
      60%{transform:translate(-5px, -1px)}
      80%{transform:translate(5px, 1px)}
      100%{transform:translate(0,0)}
    }

    .blinkRed{
      animation: blinkRed .55s ease 1;
    }
    @keyframes blinkRed{
      0%{filter:none}
      35%{filter: drop-shadow(0 0 14px rgba(255,77,109,.55))}
      100%{filter:none}
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="frame" id="frame">
      <header>
        <div class="brand">
          <div class="title">Greenback <span style="opacity:.85">($GBACK)</span></div>
          <div class="sub">Insert coins â€¢ pump the chart â€¢ donâ€™t get rugged ðŸ’€</div>
        </div>

        <div class="stats">
          <div class="pill" aria-label="Coins inserted">
            <div class="k">COINS INSERTED</div>
            <div class="v"><span id="coinsInserted">0</span> <small>clicks</small></div>
          </div>
          <div class="pill" aria-label="Rank">
            <div class="k">RANK</div>
            <div class="v"><span id="rank">0</span> <small>lvl</small></div>
          </div>
          <div class="pill" aria-label="Degen mode">
            <div class="k">DEGEN MODE</div>
            <div class="v"><span id="degen">OFF</span> <small id="degenNote">â€”</small></div>
          </div>
        </div>
      </header>

      <div class="content">
        <!-- Left: Fake pumping chart -->
        <section class="card" aria-label="Fake chart that pumps on clicks">
          <h2>ðŸ“‰ Fake Chart (Pumps on Clicks)</h2>

          <div class="chartWrap">
            <div class="chartTop">
              <div class="price">
                <div class="big">
                  <span id="price">$0.000420</span>
                  <span class="pct" id="pct">+0.00%</span>
                </div>
                <div class="small" id="priceNote">Totally organic growth (trust me bro)</div>
              </div>

              <div class="sparkBox" aria-label="Sparkline chart">
                <div class="sparkGlow"></div>
                <svg viewBox="0 0 100 100" preserveAspectRatio="none" role="img" aria-label="Price line">
                  <path id="sparkFill" d="" fill="rgba(110,231,255,.10)"></path>
                  <path id="sparkLine" d="" fill="none" stroke="rgba(110,231,255,.95)" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </div>
            </div>

            <div class="actions">
              <div class="btnRow">
                <!-- Main requirement: coins increase on INSERT COINS -->
                <button class="primary" id="btnInsert" aria-label="Insert coins">
                  INSERT COINS
                </button>

                <!-- Keep a degen toggle so we "don't break anything" logically -->
                <button class="ghost" id="btnDegen" aria-label="Activate degen mode">
                  ACTIVATE DEGEN
                </button>
              </div>

              <!-- Meme Rug Pull button -->
              <button class="danger" id="btnRug" aria-label="Rug pull (meme)">
                ðŸ’€ RUG PULL
              </button>
            </div>
          </div>
        </section>

        <!-- Right: Feed / info -->
        <aside class="card rightCol" aria-label="Activity">
          <h2>Activity Feed</h2>
          <div class="panel">
            <div class="hint">
              â€¢ Each <b>INSERT COINS</b> pumps the fake chart and increases your <b>Rank</b>.<br/>
              â€¢ <b>DEGEN</b> makes pumps wilder (still fake).<br/>
              â€¢ <b>RUG PULL</b> is just memes (but it *will* nuke the chart ðŸ’€).
            </div>

            <div class="log" id="log" aria-live="polite"></div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // ====== State ======
    const state = {
      coinsInserted: 0,
      rank: 0,
      degen: false,
      basePrice: 0.000420,
      price: 0.000420,
      lastPrice: 0.000420,
      series: [],        // values for sparkline
      seriesLen: 30,
      allTimeHigh: 0.000420
    };

    // ====== Elements ======
    const elCoins = document.getElementById('coinsInserted');
    const elRank  = document.getElementById('rank');
    const elDegen = document.getElementById('degen');
    const elDegenNote = document.getElementById('degenNote');

    const elPrice = document.getElementById('price');
    const elPct   = document.getElementById('pct');
    const elPriceNote = document.getElementById('priceNote');

    const elLine  = document.getElementById('sparkLine');
    const elFill  = document.getElementById('sparkFill');

    const elLog   = document.getElementById('log');
    const elToast = document.getElementById('toast');
    const elFrame = document.getElementById('frame');

    const btnInsert = document.getElementById('btnInsert');
    const btnDegen  = document.getElementById('btnDegen');
    const btnRug    = document.getElementById('btnRug');

    // ====== Helpers ======
    function fmtPrice(n){
      // keep it meme-y, but readable
      if (n < 0.01) return '$' + n.toFixed(6);
      if (n < 1)    return '$' + n.toFixed(4);
      return '$' + n.toFixed(2);
    }

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

    function showToast(msg){
      elToast.textContent = msg;
      elToast.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => elToast.classList.remove('show'), 1100);
    }

    function logLine(msg){
      const p = document.createElement('p');
      const time = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
      p.innerHTML = `<b>${time}</b> â€” ${msg}`;
      elLog.prepend(p);
    }

    function ensureSeries(){
      if (state.series.length === 0){
        for (let i=0;i<state.seriesLen;i++){
          state.series.push(state.price);
        }
      }
      while (state.series.length > state.seriesLen) state.series.shift();
      while (state.series.length < state.seriesLen) state.series.unshift(state.price);
    }

    function sparkPath(values){
      // normalize to 0..100 box
      const min = Math.min(...values);
      const max = Math.max(...values);
      const span = (max - min) || 1;

      const pts = values.map((v, i) => {
        const x = (i/(values.length-1))*100;
        const y = 100 - ((v - min)/span)*92 - 4; // keep margins
        return [x, y];
      });

      const d = pts.map((p, i) => (i ? 'L' : 'M') + p[0].toFixed(2) + ' ' + p[1].toFixed(2)).join(' ');
      const dFill = d + ` L 100 100 L 0 100 Z`;
      return { d, dFill, min, max };
    }

    function updateUI(){
      elCoins.textContent = String(state.coinsInserted);
      elRank.textContent  = String(state.rank);

      elDegen.textContent = state.degen ? 'ON' : 'OFF';
      elDegenNote.textContent = state.degen ? 'wilder pumps' : 'safe-ish';

      elPrice.textContent = fmtPrice(state.price);

      const pct = ((state.price - state.lastPrice) / state.lastPrice) * 100;
      const pctText = (pct >= 0 ? '+' : '') + pct.toFixed(2) + '%';
      elPct.textContent = pctText;

      // color-ish by changing background via inline style (no fixed palette change needed)
      if (pct >= 0){
        elPct.style.background = 'rgba(51,209,122,.12)';
        elPct.style.color = 'var(--good)';
      } else {
        elPct.style.background = 'rgba(255,77,109,.12)';
        elPct.style.color = 'var(--bad)';
      }

      state.allTimeHigh = Math.max(state.allTimeHigh, state.price);
      elPriceNote.textContent = `ATH: ${fmtPrice(state.allTimeHigh)} â€¢ Liquidity: imaginary`;

      ensureSeries();
      const paths = sparkPath(state.series);
      elLine.setAttribute('d', paths.d);
      elFill.setAttribute('d', paths.dFill);
    }

    // ====== Pump / Rug logic ======
    function pump(){
      state.coinsInserted += 1;
      state.rank += 1;

      state.lastPrice = state.price;

      // Pump amount (fake): small baseline + randomness; DEGEN increases volatility.
      const base = 0.004; // ~0.4% baseline
      const vol  = state.degen ? 0.040 : 0.018; // degen = more insane
      const jitter = (Math.random() * vol) - (vol * 0.25); // slightly biased up
      const pctMove = base + jitter;

      state.price = Math.max(0.000001, state.price * (1 + pctMove));

      // series update
      state.series.push(state.price);
      if (state.series.length > state.seriesLen) state.series.shift();

      logLine(`Inserted coin ðŸª™ â€” chart pumped <b>${(pctMove*100).toFixed(2)}%</b>`);
      showToast('PUMPED ðŸ“ˆ');
      updateUI();
    }

    function toggleDegen(){
      state.degen = !state.degen;
      logLine(state.degen ? `DEGEN MODE <b>ON</b> ðŸ˜ˆ` : `DEGEN MODE <b>OFF</b> ðŸ˜‡`);
      showToast(state.degen ? 'DEGEN ON ðŸ˜ˆ' : 'DEGEN OFF ðŸ˜‡');
      updateUI();
    }

    function rugPull(){
      state.lastPrice = state.price;

      // nuke it
      const nuked = Math.max(state.basePrice * 0.25, state.price * (0.06 + Math.random()*0.05));
      state.price = nuked;

      // make the chart plunge hard (fill series with lower values quickly)
      for (let i=0;i<4;i++){
        state.series.push(state.price * (0.95 - Math.random()*0.05));
      }
      while (state.series.length > state.seriesLen) state.series.shift();

      elFrame.classList.remove('shake');
      void elFrame.offsetWidth; // restart animation
      elFrame.classList.add('shake');
      elFrame.classList.add('blinkRed');
      setTimeout(()=>elFrame.classList.remove('blinkRed'), 560);

      logLine(`ðŸ’€ <b>RUG PULL</b> â€” liquidity vanished into the void`);
      showToast('RUGGED ðŸ’€');
      updateUI();
    }

    // ====== Events ======
    btnInsert.addEventListener('click', pump);
    btnDegen.addEventListener('click', toggleDegen);
    btnRug.addEventListener('click', rugPull);

    // ====== Init ======
    // seed series + first render
    ensureSeries();
    updateUI();
    logLine(`Booted $GBACK terminal â€” ready to insert coins ðŸª™`);
  </script>
</body>
</html>
